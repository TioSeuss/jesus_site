!function($){OT_UI.uncode_init=function(){OT_UI.adaptive()},OT_UI.adaptive=function(){$(document).on("ready",function(){$.ajax({url:option_tree.ajax,type:"post",dataType:"json",data:{action:"list_images"},complete:function(e){$("#setting__uncode_adaptive").append('<div id="ai-space-wrap" />'),$("#ai-space-wrap").append('<div class="ai-space">'+e.responseJSON.data.message+"</div>");var t=$('<button class="option-tree-ui-button button">Delete all AI images</button>');t.on("click",function(e){e.preventDefault();var t=$(this);return t.addClass("disabled"),t.html("Deletingâ€¦"),$.ajax({url:option_tree.ajax,type:"post",dataType:"json",data:{action:"list_images",erase:!0},complete:function(e){t.removeClass("disabled"),t.html("Delete all AI images"),$("#ai-space-wrap .ai-space").html(e.responseJSON.data.message)}}),!1}),$("#ai-space-wrap").append(t)}})})},OT_UI.fix_upload_parent=function(){},OT_UI.init_select_wrapper=function(){$(".option-tree-ui-select").each(function(){var e,t;$(this).parent().hasClass("select-wrapper")||$(this).wrap('<div class="select-wrapper" />'),$(this).hasClass("uncode-color-select")&&($(this).closest(".select-wrapper").addClass("select-uncode-colors"),-1==window.navigator.userAgent.indexOf("Windows NT 10.0")&&$(this).easyDropDown({cutOff:10}))}),$(document).on({mouseenter:function(){$(this).closest(".select-wrapper.hide-arrow").addClass("hover")},mouseleave:function(){$(this).closest(".select-wrapper.hide-arrow").removeClass("hover")}},".select-input-mixed"),$(document).on("click",".select-input-wrapper span",function(){$(this).prev("input").val("")}),$(document).on("focus",".select-input-mixed-field",function(){$(this).val("")}),$(document).on("change","input.select-input-mixed-field-text",function(){$(this).closest(".select-wrapper").find("input.select-input-mixed-field-value").val($(this).val())}),$(document).on($.browser.msie?"click":"change",".option-tree-ui-select",function(e){$(this).hasClass("select-input-mixed")&&($(this).closest(".select-wrapper").find("input.select-input-mixed-field-text ").val($(this).find("option:selected").text()),$(this).closest(".select-wrapper").find("input.select-input-mixed-field-value").val($(this).find("option:selected").val()))})},OT_UI.init_upload=function(){$(document).on("click",".ot_upload_media",function(e){e.preventDefault();var t={},i="uncode-editor",a=wp.media.view.AttachmentsBrowser,n=wp.media,o=$(this).parent(".option-tree-ui-upload-parent").find("input").attr("id"),s=$(this).attr("rel"),d=$("#"+o).val(),l="";return t[i]?void t[i].open():(n.view.uploadMediaView=n.View.extend({tagName:"div",className:"uploader-uncode-media",template:n.template("uploader-uncode-media"),events:{"click .close":"hide","paste #mle-code":"entercode","input #mle-code":"entercode"},oembed_callback:function(e,t,i){var a=void 0!=window.workflow?workflow:wp.media.frame,n=a.$el;$button=n.find(".media-button"),$spinner=n.find(".spinner"),""!=e&&(n.find("#mle-mime").val(e),n.find("#mle-width").val(t),n.find("#mle-height").val(i),$button.removeAttr("disabled"),$spinner.removeClass("visible"))},entercode:function(e){var t=this,i=$(this.$el),a=i.find("#mle-code"),n=i.find(".oembed_code"),o=i.find(".oembed"),s=i.find(".spinner"),d;setTimeout(function(){d=a.val(),0==n.length?o.after('<div class="oembed_code">'+d+"</div>"):n.html(d),o.get_oembed(t.oembed_callback,!0),s.addClass("visible")},100)},recordmedia:function(){var e=this,a=$(this.$el),n=t[i].$el.find(".media-button-select");"uploader-uncode-media"==t[i].content.get().el.className?(n.attr("disabled","disabled"),$.ajax({type:"POST",dataType:"json",url:ajaxurl+"?action=recordMedia",data:a.find("input[name],select[name],textarea[name]").serialize(),success:function(e){isNaN(e.id)||void 0==e||(l+='<div class="option-tree-ui-image-wrap"><div class="oembed"><span class="spinner" style="display: block; float: left;"></span></div><div class="oembed_code" style="display: none;">'+e.url+"</div></div>",$("#"+o).val(e.id),$("#"+o+"_media").remove(),$("#"+o).parent().parent("div").append('<div class="option-tree-ui-media-wrap" id="'+o+'_media" />'),$("#"+o+"_media").append(l).slideDown(),$("#"+o+"_media .oembed").get_oembed(null,!0),$("#"+o+"_media .spinner").removeClass("visible"),n.removeAttr("disabled"),t[i].off("select"),t[i].close())}})):e.select()},ready:function(){var e=this,a=t[i].$el.find(".media-button-select");a.off("click").on("click",function(){e.recordmedia()})},select:function(){var e=n.frame.toolbar.get("selection").selection.single();n.frame.close()}}),t[i]=n({title:$(this).attr("title"),button:{text:option_tree.upload_text},multiple:!1}),t[i].on("router:render:browse",function(e){e.set({upload:{text:"Upload Files",priority:20},browse:{text:"Media Library",priority:40},uncode:{text:"Upload oEmbed",priority:30}})}),t[i].on("content:render:uncode",function(){t[i].content.set(new n.view.uploadMediaView({controller:this}))}),t[i].on("close",function(){wp.media.view.AttachmentsBrowser=a}),t[i].on("select",function(){var e=t[i].state().get("selection").first(),a=e.attributes.url,n=e.attributes.id,s=e.attributes.mime,d=/^image\/(?:jpe?g|png|url|gif|x-icon)$/i;l+="oembed/svg"==s?'<div class="option-tree-ui-image-wrap">'+e.attributes.description+"</div>":s.match(d)?'<div class="option-tree-ui-image-wrap"><img src="'+a+'" alt="" /></div>':'<div class="option-tree-ui-image-wrap"><div class="oembed"><span class="spinner" style="display: block; float: left;"></span></div><div class="oembed_code" style="display: none;">'+a+"</div></div>",l+='<a href="javascript:(void);" class="option-tree-ui-remove-media option-tree-ui-button button button-secondary light" title="'+option_tree.remove_media_text+'"><span class="icon fa fa-minus2"></span>'+option_tree.remove_media_text+"</a>",$("#"+o).val(n),$("#"+o+"_media").remove(),$("#"+o).parent().parent("div").append('<div class="option-tree-ui-media-wrap" id="'+o+'_media" />'),$("#"+o+"_media").append(l).slideDown(),$("#"+o+"_media .oembed").get_oembed(),t[i].off("select"),t[i].close()}),t[i].on("open",function(){var e=t[i].state().get("selection"),a=n.attachment(d);a.fetch(),e.set(a)}),void t[i].open())})},$(document).ready(function(){OT_UI.uncode_init()})}(jQuery),!function($){$(document).on("ready",function(){$.fn.loadIcons=function(){var e=$(this).fontIconPicker({theme:"fip-bootstrap"});$.ajax({url:SiteParameters.OT_PATH+"selection.json",type:"GET",dataType:"json"}).done(function(t){var i="fa "+t.preferences.fontPref.prefix,a=[],n=[];$.each(t.icons,function(e,t){a.push(i+t.properties.name.split(",")[0]),t.icon&&t.icon.tags&&t.icon.tags.length?n.push(t.properties.name+" "+t.icon.tags.join(" ")):n.push(t.properties.name)}),e.setIcons(a,n)})},$(".button_icon_container").each(function(){$(this).loadIcons()}),$(".hndle").on("mousedown",function(){var e=$(this).closest("div").attr("id");$(".wrap").on("mouseup",function(){var t={};$("#"+e+' input[type="radio"]').each(function(){$(this).is(":checked")&&(t[$(this).attr("name")]=$(this).val()),$(document).data("ot_checked_radios",t)}),setTimeout(function(){var e=$(document).data("ot_checked_radios");for(key in e)$('input[name="'+key+'"]').filter('[value="'+e[key]+'"]').trigger("click");$(".wrap").unbind("mouseup")},50)})}),$.each($(".section-title-wrap"),function(){$(this).addClass("closed");var e=$(this).nextUntil(".section-title-wrap").wrapAll('<div class="hidden" />'),t=new Array;$.each(e,function(e,i){$(i).hasClass("break-master-wrap")&&t.push(i)}),$(t).wrapAll('<div class="overridable-wrap"><div class="overridable-inner"></div></div>'),$(this).on("click",function(){$(this).toggleClass("closed"),$(this).next().slideToggle()})})})}(window.jQuery);