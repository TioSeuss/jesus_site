"use strict";"undefined"==typeof jQuery.fn.draggable&&!function($){$.fn.draggable=function(){var e=document.getElementById(this.attr("id"));return e.style.top="121px",Drag.init(e,null,26,426,86,86),this}}(jQuery);var gradX=function(e,r){function a(e,r,a){e.attachEvent?e.attachEvent("on"+r,function(){a.call(e)}):e.addEventListener&&e.addEventListener(r,a,!1)}var t={targets:[],sliders:[],direction:"left",type:"linear",code_shown:!1,change:function(e,r){}};gradx={rand_RGB:[],rand_pos:[],id:null,slider_ids:[],slider_index:0,sliders:[],direction:"left",type:"linear",shape:"cover",slider_hovered:[],jQ_present:!0,code_shown:!1,load_jQ:function(){this.gx=jQuery},add_event:function(e,r,t){a(e,r,t)},get_random_position:function(){var e;do e=parseInt(100*Math.random());while(this.rand_pos.indexOf(e)>-1);return this.rand_pos.push(e),e},get_random_rgb:function(){var e,r,a,t;do e=parseInt(255*Math.random()),r=parseInt(255*Math.random()),a=parseInt(255*Math.random()),t="rgb("+e+", "+r+", "+a+")";while(this.rand_RGB.indexOf(t)>-1);return this.rand_RGB.push(t),t},update_target:function(e){if(this.targets.length>0){var r,a,t,d=this.targets.length,i=e.length;for(r=0;d>r;r++)for(t=gradx.gx(this.targets[r]),a=0;i>a;a++)t.css("background-image",e[a])}},apply_style:function(r,a){var t="linear";if("linear"!=gradx.type&&(t="radial"),a.indexOf(this.direction)>-1)var d=["-webkit-"+t+"-gradient("+a+")","-moz-"+t+"-gradient("+a+")","-ms-"+t+"-gradient("+a+")","-o-"+t+"-gradient("+a+")",t+"-gradient("+a+")"];else d=[a];for(var s=d.length,n="";s>0;)s--,r.css("background",d[s]),n+="background: "+d[s]+";";this.change(this.sliders,d);var g=[];for(i=0;i<this.sliders.length;i++){var l={color:this.sliders[i][0],position:this.sliders[i][1]};g.push(l)}var o=new Object;o.css=n,o.sliders=g,o.type=this.type,o.direction=this.direction,jQuery(e).closest(".format-setting-inner").find(".input-gradient").val(JSON.stringify(o))},apply_default_styles:function(){this.update_style_array();var e=this.get_style_value();this.apply_style(this.panel,e)},update_style_array:function(){this.sliders=[];var e=gradx.slider_ids.length,r,a,t,d;for(r=0;e>r;r++)d="#"+gradx.slider_ids[r],a=parseInt(gradx.gx(d).css("left")),t=parseInt(a/gradx.container_width*100),t-=6,gradx.sliders.push([gradx.gx(d).css("background-color"),t]);this.sliders.sort(function(e,r){return e[1]>r[1]?1:-1})},get_style_value:function(){var e=gradx.slider_ids.length;if(1===e)r=this.sliders[0][0];else{for(var r="",a="",t=0;e>t;t++)""==this.sliders[t][1]?r+=a+this.sliders[t][0]:(this.sliders[t][1]>100&&(this.sliders[t][1]=100),r+=a+(this.sliders[t][0]+" "+this.sliders[t][1]+"%")),a=" , ";r="linear"==this.type?this.direction+" , "+r:this.direction+" , "+this.type+" "+this.shape+" , "+r}return r},get_rgb_obj:function(e){return e=e.split("("),e=e[1],e=e.split(","),{r:parseInt(e[0]),g:parseInt(e[1]),b:parseInt(e[2])}},load_info:function(e){var r="#"+e.id;if(this.current_slider_id=r,this.slider_ids.indexOf(e.id)>-1){var a=gradx.gx(r).css("backgroundColor"),t=this.get_rgb_obj(a),d=gradx.gx(r).css("left");parseInt(d)>26&&parseInt(d)<426&&gradx.gx("#gradx_slider_info").css("left",d).show(),this.set_colorpicker(t)}},add_slider:function(e){var r,a,t,d,i,s;0===e.length&&(e=[{color:gradx.get_random_rgb(),position:gradx.get_random_position()},{color:gradx.get_random_rgb(),position:gradx.get_random_position()}]),obj=e;for(t in obj){if("undefined"==typeof obj[t].position)break;var s=26;d=parseInt(obj[t].position*this.container_width/100)+s+"px",r="gradx_slider_"+this.slider_index,this.sliders.push([obj[t].color,obj[t].position]),this.slider_ids.push(r),a="<div class='gradx_slider' id='"+r+"'></div>",gradx.gx("#gradx_start_sliders_"+this.id).append(a),gradx.gx("#"+r).css("backgroundColor",obj[t].color).css("left",d),this.slider_index++}for(var n=0,g=this.slider_ids.length;g>n;n++)gradx.gx("#"+this.slider_ids[n]).draggable({containment:"parent",axis:"x",start:function(){gradx.jQ_present&&(gradx.current_slider_id="#"+gradx.gx(this).attr("id"))},drag:function(){gradx.update_style_array(),gradx.apply_style(gradx.panel,gradx.get_style_value());var e=gradx.gx(gradx.current_slider_id).css("left");parseInt(e)>26&&parseInt(e)<426&&gradx.gx("#gradx_slider_info").css("left",e).show();var r=gradx.gx(gradx.current_slider_id).css("backgroundColor"),a=gradx.get_rgb_obj(r);gradx.cp.spectrum("set",a)}}).click(function(){return gradx.load_info(this),!1})},set_colorpicker:function(e){gradx.cp.spectrum({move:function(e){if(0!=gradx.current_slider_id){var r=e.toRgbString();gradx.gx(gradx.current_slider_id).css("background-color",r),gradx.update_style_array(),gradx.apply_style(gradx.panel,gradx.get_style_value())}},change:function(){gradx.gx("#gradx_slider_info").hide()},flat:!0,showAlpha:!0,color:e,clickoutFiresChange:!0,showInput:!0,showButtons:!1})},generate_options:function(e){for(var r=e.length,a,t,d="",i=0;r>i;i++)a=e[i].split(" "),a=a[0],t=2>i?a[1]:"",a=a.replace("-"," "),d+="<option value="+e[i]+" "+t+">"+a+"</option>";return d},generate_radial_options:function(){var e;e=["horizontal-center disabled","center selected","left","right"],gradx.gx("#gradx_gradient_subtype").html(gradx.generate_options(e)),e=["vertical-center disabled","center selected","top","bottom"],gradx.gx("#gradx_gradient_subtype2").html(gradx.generate_options(e)).parent().css("display","inline-block")},generate_linear_options:function(){var e;e=["horizontal-center disabled","left selected","right","top","bottom"],gradx.gx("#gradx_gradient_subtype").html(gradx.generate_options(e)),gradx.gx("#gradx_gradient_subtype2").parent().css("display","none")},destroy:function(){var e={targets:[],sliders:[],direction:"left",type:"linear",code_shown:!1,change:function(e,r){}};for(var r in e)gradx[r]=e[r]},load_gradx:function(e,r){this.me=gradx.gx(e),this.id=e.replace("#",""),e=this.id,this.current_slider_id=!1;var a="<div class='gradx'>\n                        <div id='gradx_add_slider' class='gradx_add_slider gradx_btn'><i class='fa fa-plus2 fa-fw'></i>add</div>\n                        <div class='gradx_slectboxes'>\n                        <div class='select-wrapper'>\n                            <select id='gradx_gradient_type' class='option-tree-ui-select gradx_gradient_type'>\n                                <option value='linear'>Linear</option>\n                                <option value='circle'>Radial - Circle</option>\n                                <option value='ellipse'>Radial - Ellipse</option>\n                            </select>\n                        </div>\n                        <div class='select-wrapper'>\n                            <select id='gradx_gradient_subtype' class='option-tree-ui-select gradx_gradient_type'>\n                                <option id='gradx_gradient_subtype_desc' value='gradient-direction' disabled>gradient direction</option>\n                                <option value='left' selected>Left</option>\n                                <option value='right'>Right</option>\n                                <option value='top'>Top</option>\n                                <option value='bottom'>Bottom</option>\n                            </select>\n                        </div>\n                        <div class='select-wrapper gradx_hide'>\n                            <select id='gradx_gradient_subtype2' class='option-tree-ui-select gradx_gradient_type'>\n                            </select>\n                        </div>\n                        <div class='select-wrapper gradx_hide'>\n                            <select id='gradx_radial_gradient_size' class='option-tree-ui-select gradx_gradient_type'>\n                            </select>\n                        </div>\n                        </div>\n                        <div class='gradx_container' id='gradx_"+e+"'>\n                            <div id='gradx_stop_sliders_"+e+"'></div>\n                            <div class='gradx_panel' id='gradx_panel_"+e+"'></div>\n                            <div class='gradx_start_sliders' id='gradx_start_sliders_"+e+"'>\n                                <div class='cp-default' id='gradx_slider_info'>\n                                    <div id='gradx_slider_controls'>\n                                        <div id='gradx_delete_slider' class='gradx_btn'><i class='fa fa-cross fa-fw'></i>delete</div>\n                                    </div>\n                                    <div id='gradx_slider_content'></div>\n                                </div> \n                            </div>\n                        </div>\n                    </div>";this.me.html(a);var t=["gradient-size disabled","closest-side selected","closest-corner","farthest-side","farthest-corner","contain","cover"],d="";if(d=gradx.generate_options(t),gradx.gx("#gradx_radial_gradient_size").html(d),this.container=gradx.gx("#gradx_"+e),this.panel=gradx.gx("#gradx_panel_"+e),this.container_width=400,this.add_slider(r),gradx.add_event(document,"click",function(){return gradx.slider_hovered[e]?void 0:(gradx.gx("#gradx_slider_info").hide(),!1)}),gradx.gx("#gradx_add_slider").click(function(){gradx.add_slider([{color:gradx.get_random_rgb(),position:gradx.get_random_position()}]),gradx.update_style_array(),gradx.apply_style(gradx.panel,gradx.get_style_value())}),gradx.cp=gradx.gx("#gradx_slider_content"),gradx.set_colorpicker("blue"),gradx.gx("#gradx_delete_slider").click(function(){gradx.gx(gradx.current_slider_id).remove(),gradx.gx("#gradx_slider_info").hide();for(var e=gradx.current_slider_id.replace("#",""),r=0;r<gradx.slider_ids.length;r++)gradx.slider_ids[r]==e&&gradx.slider_ids.splice(r,1);gradx.update_style_array(),gradx.apply_style(gradx.panel,gradx.get_style_value()),gradx.current_slider_id=!1}),gradx.gx("#gradx_gradient_type").change(function(){var e=gradx.gx(this).val(),r,a="";"linear"!==e?gradx.generate_radial_options():(gradx.generate_linear_options(),gradx.gx("#gradx_gradient_subtype").val("left")),gradx.type=e,gradx.direction=gradx.gx("#gradx_gradient_subtype").val(),gradx.apply_style(gradx.panel,gradx.get_style_value())}),"linear"!==this.type){gradx.gx("#gradx_gradient_type").val(this.type),gradx.generate_radial_options();var i,s;if("left"!==this.direction){var n;n=this.direction.indexOf(",")>-1?this.direction.split(","):this.direction.split(" "),i=n[0],s=n[1],gradx.gx("#gradx_gradient_subtype").val(i),gradx.gx("#gradx_gradient_subtype2").val(s)}else var i=gradx.gx("#gradx_gradient_subtype").val(),s=gradx.gx("#gradx_gradient_subtype2").val();gradx.direction=i+" "+s,gradx.apply_style(gradx.panel,gradx.get_style_value())}else"left"!==this.direction&&gradx.gx("#gradx_gradient_subtype").val(this.direction);gradx.gx("#gradx_gradient_subtype").change(function(){if("linear"===gradx.type)gradx.direction=gradx.gx(this).val();else{var e=gradx.gx(this).val(),r=gradx.gx("#gradx_gradient_subtype2").val();gradx.direction=e+" "+r}gradx.apply_style(gradx.panel,gradx.get_style_value())}),gradx.gx("#gradx_gradient_subtype2").change(function(){var e=gradx.gx("#gradx_gradient_subtype").val(),r=gradx.gx(this).val();gradx.direction=e+" "+r,gradx.apply_style(gradx.panel,gradx.get_style_value())}),gradx.gx("#gradx_radial_gradient_size").change(function(){gradx.shape=gradx.gx(this).val(),gradx.apply_style(gradx.panel,gradx.get_style_value())}),gradx.add_event(document.getElementById("gradx_slider_info"),"mouseout",function(){gradx.slider_hovered[e]=!1}),gradx.add_event(document.getElementById("gradx_slider_info"),"mouseover",function(){gradx.slider_hovered[e]=!0})}},gradx.load_jQ(),gradx.gx.extend(t,r);for(var d in t)gradx[d]=t[d];gradx.load_gradx(e,gradx.sliders),gradx.apply_default_styles()};